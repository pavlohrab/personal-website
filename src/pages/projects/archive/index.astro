---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ProjectCard from '../../../components/cards/ProjectCard.astro';

// Get all archive projects
const archiveProjects = (await getCollection('projects'))
	.filter(p => p.data.category === 'archive')
	.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Past Projects" description="Archive of completed research and academic projects">
	<div class="stack gap-20 lg:gap-48">
		<div class="wrapper stack gap-8 lg:gap-20">
			<header class="page-header">
				<a href={`${import.meta.env.BASE_URL}projects/`} class="back-link">‚Üê Back to Projects</a>
				<h1 class="page-title">Past Projects</h1>
				<p class="page-subtitle">Completed research, thesis work, and academic projects</p>
			</header>

			<main class="projects-content">
				<div class="projects-grid compact">
					{archiveProjects.map(project => (
						<ProjectCard
							title={project.data.title}
							status={project.data.status}
							meta={project.data.meta}
							description={project.data.description}
							tags={project.data.tags}
							links={project.data.links}
							href={`/projects/${project.id}/`}
							compact={project.data.compact}
						/>
					))}
				</div>
			</main>
		</div>
	</div>
</BaseLayout>
