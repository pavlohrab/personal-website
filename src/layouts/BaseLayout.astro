---
// Learn about using Astro layouts:
// https://docs.astro.build/en/core-concepts/layouts/

import Footer from '../components/Footer.astro';
// Component Imports
import MainHead from '../components/MainHead.astro';
import Nav from '../components/Nav.astro';
import NetworkBackground from '../components/NetworkBackground.astro';
import BackToTop from '../components/BackToTop.astro';
// Import shared component styles
import '../styles/components.css';

interface Props {
	title?: string | undefined;
	description?: string | undefined;
}

const { title, description} = Astro.props;
---

<html lang="en">
	<head>
		<MainHead title={title} description={description} />
	</head>
	<body>
		<div class="stack backgrounds">
			<NetworkBackground />
			<Nav />
			<slot />
			<Footer />
		</div>
		<BackToTop />

		<script>
			// Add "loaded" class once the document has completely loaded.
			addEventListener('load', () => document.documentElement.classList.add('loaded'));

			// Global Scroll Reveal - works on all pages
			function initScrollReveal() {
				const revealObserver = new IntersectionObserver((entries) => {
					entries.forEach(entry => {
						if (entry.isIntersecting) {
							entry.target.classList.add('revealed');
							revealObserver.unobserve(entry.target);
						}
					});
				}, { threshold: 0.1 });

				document.querySelectorAll('.scroll-reveal').forEach(el => {
					el.classList.remove('revealed');
					revealObserver.observe(el);
				});
			}

			// Run on initial load and after View Transitions
			document.addEventListener('astro:page-load', initScrollReveal);
			initScrollReveal();
		</script>

		<style>
			.backgrounds {
				min-height: 100%;
				isolation: isolate;
				background: var(--gray-999);
				position: relative;
				/* Allow canvas to position within this container */
			}

			/* Content will naturally appear above canvas (z-index: -1) */
		</style>
	</body>
</html>
